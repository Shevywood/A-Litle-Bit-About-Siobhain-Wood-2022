(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1320:function(e,s,t){"use strict";const{registerEpics:n,registerReducer:o}=t(4),r=t(1379),a=t(2237),{registerElementsEpic:i,registerAssessmentComponentFeedbackEpic:c,registerTrackingMapEpic:m,evaluateAssessmentOnComponentCompletedEpic:l,courseAssessmentCompleteEpic:u,showAssessmentCompletedPromptEpic:p,confirmResetAssessmentDialogEpic:d,setupRetakeAssessmentEpic:v,setVariableOnScoreChangedEpic:h,setVariableOnAssessmentCompletedEpic:_}=t(2239);n(i,c,m,l,u,p,d,v,h,_,r("courseAssessment")),o("courseAssessment",a)},1375:function(e,s,t){"use strict";var n=t(27)(t(33));const o=t(0),r=t(7),a=t(1),i=t(118),c=t(298),m={default:"ev-default",chromeless:"ev-chromeless",warning:"ev-warning"};function l({text:e,icon:s,iconPosition:t,iconSize:a,showPulseAnimation:l,image:u,imagePosition:p,variant:d,className:v,textAlignment:h,..._}){const A=()=>{if(s)return o.createElement(c,{icon:s,size:a})},E=()=>{if(u&&u.src)return o.createElement(i,{graphicSrc:u.src,altText:u.alt})};return o.createElement("button",(0,n.default)({type:"button",className:r("ev-button",m[d],v,"ev-button-icon-position-"+t,"ev-button-image-position-"+p,"ev-button-text-align-"+h,{"ev-button-no-text":!e,"ev-has-icon":s,"ev-has-image":u&&u.src,"ev-pulse":l})},_),(()=>{if("top"===p||"left"===p)return E()})(),o.createElement("span",{className:"ev-button-inner"},(()=>{if("top"===t||"left"===t)return A()})(),e&&o.createElement("span",{className:"ev-button-text"},e),(()=>{if("bottom"===t||"right"===t)return A()})()),(()=>{if("bottom"===p||"right"===p)return E()})())}l.propTypes={text:a.string,textAlignment:a.string,icon:a.string,iconPosition:a.string,iconSize:a.number,showPulseAnimation:a.bool,image:a.object,imagePosition:a.string,className:a.string,variant:a.oneOf(["default","chromeless","warning"])},l.defaultProps={variant:"default",iconPosition:"left",iconSize:20,showPulseAnimation:!1,imagePosition:"top",textAlignment:"center"},e.exports=l},1379:function(e,s,t){"use strict";const n=t(8),{Observable:o}=t(5),{setLocationReadyState:r,PUSH_LOCATION:a}=t(9),i=t(217),c=t(215);e.exports=(e,s)=>(t,m)=>t.filter(({type:s})=>{if(s!==a)return;const{navigationStatus:t,path:n}=m.getState().location;return"plugin"===t&&n[0]===e}).switchMap(()=>{const t=m.getState(),{device:a,course:l}=t;let u;if(u=s?s(t):n(l,["_"+e,"_heroImage"]),!u||!u._graphic)return o.empty();const p=i(u._graphic.src,u._graphic.srcAdvanced,!0);return p?o.concat(o.of(r(!1)),o.bindCallback(c)(p,!1).map(()=>r(!0))):o.empty()})},1381:function(e,s,t){"use strict";const n=t(8),{store:o}=t(4);e.exports=function(e,s,t){const{course:r,theme:a}=o.getState(),i=r[e],c=n(i,s),m=n(a,["_extensions",e,"_settings",s]);return c||m||t}},1394:function(e,s,t){"use strict";const n=t(8);e.exports=(e,s,t)=>(Array.isArray(e)||(e=[e]),({type:o})=>-1!==e.indexOf(o)&&n(t.getState(),["course",s,"_isEnabled"],!1))},1423:function(e,s,t){"use strict";const n=t(11),o=t(43),{createSelector:r}=t(55),a=e=>e.courseAssessment;s.courseAssessmentSelector=r([e=>e.course._courseAssessment,a],(e={},s={})=>n({},e,s)),s.courseAssessmentComponentsSelector=r([a,e=>e.components],(e,s)=>e?o(s,e.componentIds):{}),s.courseAssessmentStatusSelector=r(a,e=>e._isComplete?e._isPassed?"pass":"fail":"incomplete")},1438:function(e,s,t){"use strict";const n=t(8),o=t(12),r=t(174),a=t(31),i=t(141),c=t(2),m=t(0),l=t(1),u=t(7),{connect:p}=t(6),d=t(29),v=t(75),h=t(30),_=t(39),A=t(467),E=t(1478),C=c({displayName:"CourseAssessmentResultsOverview",propTypes:{components:l.object.isRequired,completedComponentsCount:l.number,isComponentOverview:l.bool,isFullScreenOpen:l.bool,_isComplete:l.bool.isRequired,_isPassed:l.bool.isRequired,_showScoreAsPercentage:l.bool,_showQuestionsCompleted:l.bool,_showQuestionsCorrect:l.bool,_showAttemptsTaken:l.bool,incompleteFeedback:l.string,scoreText:l.string.isRequired,score:l.number.isRequired,resultsOverviewTitle:l.string.isRequired,progressDescription:l.string.isRequired,resultsQuestionsCorrect:l.string.isRequired,resultsViewAverageAttemptsTakenText:l.string.isRequired},getDefaultProps:()=>({_showScoreAsPercentage:!0,_showQuestionsCompleted:!0,_showQuestionsCorrect:!0,_showAttemptsTaken:!0}),getFeedback(){const{props:e}=this;return e._isComplete?n(e,["_feedback",e._isPassed?"passed":"failed"]):e.incompleteFeedback},getAverageAttempts(){const{props:e}=this;let s=0;o(e.components,e=>{if(!e._isComplete)return;const{_attempts:t,_attemptsLeft:n}=e,o=t-n;s+=r(o)?o:1});return Math.round(s/e.completedComponentsCount*100)/100||"N/A"},getCorrectComponentsCount(){return a(this.props.components,{_isComplete:!0,_isCorrect:!0}).length},renderScore(e){const{props:s}=this;if(!s._isComplete)return;const t=u("ev-icon ev-info-detail-display",{"ev-icon-cross":!s._isPassed,"ev-icon-check":s._isPassed}),n=s.score+(s._showScoreAsPercentage?"%":"");return e?m.createElement("div",{className:"ev-course-assessment-results-component-overview-results"},m.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},m.createElement("div",{className:"ev-info-detail"},m.createElement("div",{className:t})),m.createElement("div",{className:"ev-label"},m.createElement(h,{element:"span",html:s.scoreText})," ",m.createElement("b",null,n)))):m.createElement("div",{className:"ev-info-detail"},m.createElement("div",{className:t}),m.createElement("div",{className:"ev-info-detail-label"},m.createElement(h,{element:"span",html:s.scoreText})," ",m.createElement("b",null,n)))},renderResultsDetail(e){const{_showQuestionsCompleted:s,_showQuestionsCorrect:t,_showAttemptsTaken:n}=this.props;if(s||t||n)return e?m.createElement("div",{className:"ev-course-assessment-results-component-overview-results"},this.renderQuestionsCompleted(!0),this.renderQuestionsCorrect(!0),this.renderAttempts(!0)):m.createElement("div",{className:"ev-content-row ev-course-assessment-results-roundup"},m.createElement("div",{className:"ev-content-row-inner ev-clearfix"},this.renderQuestionsCompleted(),this.renderQuestionsCorrect(),this.renderAttempts()))},renderQuestionsCompleted(e){const{props:s}=this;if(s._showQuestionsCompleted)return e?m.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},m.createElement(E,{key:s.completedComponentsCount,componentsCount:i(s.components),completedComponentsCount:s.completedComponentsCount}),m.createElement(h,{className:"ev-label",html:s.progressDescription})):m.createElement("div",{className:"ev-course-assessment-results-progress ev-course-assessment-results-roundup-col"},m.createElement(E,{key:s.isFullScreenOpen,componentsCount:i(s.components),completedComponentsCount:s.completedComponentsCount}),m.createElement(h,{className:"ev-course-assessment-results-progress-text ev-info-graph-label",html:s.progressDescription}))},renderQuestionsCorrect(e){const{props:s}=this;if(!s._showQuestionsCorrect)return;const t=`${this.getCorrectComponentsCount()} / ${i(s.components)}`;return e?m.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},m.createElement("div",{className:"ev-info-detail"},m.createElement("div",{className:"ev-info-detail-display"},t)),m.createElement(h,{className:"ev-label",html:s.resultsQuestionsCorrect})):m.createElement("div",{className:"ev-course-assessment-results-questions ev-course-assessment-results-roundup-col"},m.createElement("div",{className:"ev-course-assessment-results-questions-inner ev-info-detail"},m.createElement("div",{className:"ev-course-assessment-results-question-result ev-info-detail-display"},t),m.createElement(h,{className:"ev-course-assessment-results-question-text ev-info-detail-label",html:s.resultsQuestionsCorrect})))},renderAttempts(e){const{props:s}=this;if(s._showAttemptsTaken)return e?m.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},m.createElement("div",{className:"ev-info-detail"},m.createElement("div",{className:"ev-info-detail-display"},this.getAverageAttempts())),m.createElement(h,{className:"ev-label",html:s.resultsViewAverageAttemptsTakenText})):m.createElement("div",{className:"ev-course-assessment-results-attempts ev-course-assessment-results-roundup-col"},m.createElement("div",{className:"ev-course-assessment-results-attempts-inner ev-info-detail"},m.createElement("div",{className:"ev-course-assessment-results-attempts-result ev-info-detail-display"},this.getAverageAttempts()),m.createElement(h,{className:"ev-course-assessment-results-attempts-text ev-info-detail-label",html:s.resultsViewAverageAttemptsTakenText})))},renderComponentOverview(){const{props:e}=this;return m.createElement("div",{className:"ev-course-assessment-results-component-overview"},m.createElement(v,{headingElement:"h"+(this.context+1),displayTitle:e.resultsOverviewTitle,className:"ev-component-title",innerClassName:"ev-component-title-inner"}),this.renderScore(!0),m.createElement(d,{className:"ev-component-body",innerClassName:"ev-component-body-inner",body:this.getFeedback()}),this.renderResultsDetail(!0))},render(){const{props:e}=this;return e.isComponentOverview?this.renderComponentOverview():m.createElement(A,{className:"ev-course-assessment-results-overview"},m.createElement(v,{headingElement:"h"+this.context,displayTitle:e.resultsOverviewTitle,className:"ev-component-title",innerClassName:"ev-component-title-inner"}),m.createElement("div",{className:"ev-content-row"},m.createElement("div",{className:"ev-content-row-inner"},this.renderScore(),m.createElement(d,{className:"ev-course-assessment-results-overview-status-feedback  ev-content-body",innerClassName:"ev-course-assessment-results-overview-status-feedback-inner ev-content-body-inner",body:this.getFeedback()}))),this.renderResultsDetail())}});C.contextType=_,e.exports=p(({fullScreen:e})=>({isFullScreenOpen:e.isOpen}))(C)},1439:function(e,s,t){"use strict";const n=t(0),o=t(1),r=t(1375),a=t(75),i=t(39),c=t(467),m=e=>{const s=n.useContext(i),t=s=>{s.preventDefault(),e.onRetakeAssessment()},o=()=>{const{retakeAttemptsPrefixText:s,retakeAttemptsTaken:t,_retakeAttempts:n,_allowUnlimitedRetakeAttempts:o}=e.courseAssessment;return o?`${s}: ${t}`:`${s}: ${t}/${n}`},m=()=>{const{retakeAttemptsTaken:s,_retakeAttempts:o,retakeAssessmentButtonText:a,_allowUnlimitedRetakeAttempts:i,_shouldHideRetakeOnAssessmentPassed:c,_isPassed:m}=e.courseAssessment;if(!(e.hideRetakeButton||c&&m)&&(s!==o||i))return n.createElement("div",{className:"ev-course-assessment-results-overview-reset"},n.createElement("div",{className:"ev-course-assessment-results-overview-reset-inner"},n.createElement(r,{onClick:t,variant:"warning",text:a})))};return e.isComponentRetake?n.createElement("div",{className:"ev-course-assessment-results-component-overview-retake"},n.createElement("div",{className:"ev-label"},o()),m()):n.createElement(c,null,n.createElement(a,{headingElement:"h"+s,displayTitle:o(),className:"ev-component-title",innerClassName:"ev-component-title-inner"}),m())};m.propTypes={courseAssessment:o.object.isRequired,onRetakeAssessment:o.func,hideRetakeButton:o.bool,isComponentRetake:o.bool},e.exports=n.memo(m)},1478:function(e,s,t){"use strict";const n=t(2),o=t(1),r=t(0),a=t(48),{connect:i}=t(6),c=t(139),m=t(1479),l=n({displayName:"CourseAssessmentProgressCircle",propTypes:{variables:o.object.isRequired,componentsCount:o.number.isRequired,completedComponentsCount:o.number.isRequired,swatches:o.object},getDefaultProps:()=>({completedComponentsCount:0}),componentDidMount(){const e=a.findDOMNode(this),{variables:s,componentsCount:t,completedComponentsCount:n,swatches:o}=this.props,r=c(s["@chart-background-color"],o),i=c(s["@chart-highlight-color"],o),l=c(s["@chart-text-color"],o),u=Math.round(n/t*100)+"%";m(e,80,80,n,t,u,18,38,38,4,4,r,i,l)},render:()=>r.createElement("div",{className:"ev-course-assessment-results-stats-progress-canvas"})});e.exports=i(e=>({variables:e.theme._chart._variables,swatches:e.theme._swatches}))(l)},1479:function(e,s,t){"use strict";const n=t(1405);e.exports=function(e,s,t,o,r,a,i,c,m,l,u,p,d,v){const h=n(e,s,t);h.customAttributes.arc=function(e,s,t,n,o){const r=360/n*t,a=(90-r)*Math.PI/180,i=e+o*Math.cos(a),c=s-o*Math.sin(a);return{path:n===t?[["M",e,s-o],["A",o,o,0,1,1,e-.01,s-o]]:[["M",e,s-o],["A",o,o,0,+(r>180),1,i,c]]}},h.text(s/2,t/2,a).attr({"font-size":i,fill:v,"font-weight":"bold"}),h.circle(s/2,t/2,m).attr({stroke:p,"stroke-width":u}),h.path().attr({stroke:d,"stroke-width":l,arc:[s/2,t/2,0,r,c]}).rotate(0,0,0).animate({arc:[s/2,t/2,o,r,c]},1900)}},1599:function(e,s,t){"use strict";const n=t(31),o=t(2238);e.exports=({_shouldIncludeAllQuestions:e},s)=>n(s,o(e?"_isQuestionType":"_courseAssessment._isEnabled",!0))},2237:function(e,s,t){"use strict";const n=t(28),o=t(141),r=t(43),a=t(12),{SETUP_APP:i,APP_READY:c}=t(9),{COMPONENTS_UPDATED:m}=t(60),{RESTORE_EXTENSION:l}=t(86),u=t(1599),{EVALUATE_COURSE_ASSESSMENT:p,COURSE_ASSESSMENT_RESET:d,COURSE_ASSESSMENT_COMPLETE:v}=t(475),h={_isEnabled:!1,_isComplete:!1,_isPassed:!1,_progress:0,_shouldHideMarking:!1,componentsCount:0,completedComponentsCount:0,correctComponentsCount:0,retakeAttemptsTaken:0,totalAttemptsTaken:0,score:0,componentIds:[],_hasLoadedFromScorm:!1};function _(e,s){if(!e._isEnabled)return e;const{components:t,course:n}=s.payload,i=n._courseAssessment._passPercentage,c=r(t,e.componentIds),m=o(c);let l=0,u=0;a(c,e=>{e._isComplete&&(l+=1,e._isCorrect&&(u+=1))});const p=Math.round(u/m*100),d=m===l,v=d&&p>=i,h=100/m*l;return{...e,_isComplete:d,_isPassed:v,_progress:h,score:p,componentsCount:m,completedComponentsCount:l,correctComponentsCount:u}}e.exports=(e=h,s)=>{switch(s.type){case i:return function(e,s){const{course:t,components:r}=s.payload,a=t._courseAssessment;if(a&&a._isEnabled){const s=u(a,r),t=n(s,e=>e._id),i=o(s);return{...e,_isEnabled:!0,_shouldHideMarking:a._shouldHideMarking,componentIds:t,componentsCount:i,retakeAttemptsTaken:0,totalAttemptsTaken:0}}return h}(e,s);case c:return function(e,s){if(!e._isEnabled)return e;const{scorm:t}=s.payload;return t&&t._isEnabled&&!e._hasLoadedFromScorm&&(e=t.suspendData&&void 0!==t.suspendData._assessmentAttemptsTaken?{...e,retakeAttemptsTaken:t.suspendData._assessmentAttemptsTaken,_hasLoadedFromScorm:!0}:{...e,_hasLoadedFromScorm:!0}),_(e,s)}(e,s);case p:case m:return _(e,s);case d:return{...e,retakeAttemptsTaken:e.retakeAttemptsTaken+1};case v:return{...e,totalAttemptsTaken:e.totalAttemptsTaken+1};case l:if("courseAssessment"===s.payload.extensionName)return{...e,...s.payload.extensionData};default:return e}}},2238:function(e,s,t){var n=t(319),o=t(503);e.exports=function(e,s){return o(e,n(s,1))}},2239:function(e,s,t){"use strict";const n=t(8),o=t(170),r=t(31),a=t(295),i=t(93),c=t(11),m=t(40),l=t(73),{Observable:u}=t(5),p=t(0),d=t(165),{asap:v}=t(223),{SETUP_APP:h}=t(9),{COMPONENT_COMPLETED:_,COMPONENTS_UPDATED:A,OVERWRITE_COMPONENTS:E,updateComponents:C,SETUP_COMPONENT:b,SETUP_ANSWER_STATE:f}=t(60),{addPrompt:k}=t(95),{addElement:g}=t(42),N=t(316),{NavigationSideItem:w}=t(474),{registerTrackingMap:S}=t(4),y=t(76),T=t(211),R=t(1381),x=t(1394),{updateVariable:P}=t(51),O=t(1599),{evaluateCourseAssessment:I,courseAssessmentComplete:D,courseAssessmentComponentsReset:B,courseAssessmentReset:M,EVALUATE_COURSE_ASSESSMENT:q,COURSE_ASSESSMENT_COMPLETE:V,SETUP_COURSE_ASSESSMENT_RETAKE:F,SHOW_COURSE_ASSESSMENT_CONFIRM_RESET_DIALOG:U}=t(475),L=t(2240),Q=t(2245),j=t(2247),H=t(2249),K=(e,s)=>x(e,"_courseAssessment",s);s.registerElementsEpic=(e,s)=>e.filter(K(h,s)).mergeMap(()=>{const{course:e,components:t}=s.getState(),r=e._courseAssessment,a=O(r,t),i=[];if(i.push(g({parent:"menuItem",position:"content",name:"courseAssessment",component:j,props:{}})),r._shouldDisableAssessmentCompletedPopup||i.push(g({parent:"navigationSide",name:"courseAssessment",component:w,props:{link:"/courseAssessment/showResults",icon:R("_courseAssessment","_navigationIcon","pie-chart"),label:r.title}}),g({parent:"router",name:"courseAssessment",component:L,path:"/courseAssessment/showResults",exact:!0,getShouldPersist:e=>n(e,"course._courseAssessment._isEnabled",!1)})),r._shouldDisableQuestionFeedback){const e=o(a,(e,s)=>(e[s._id]={_canShowFeedback:!1},e),{});i.push(C(e))}return u.of(...i)}),s.registerAssessmentComponentFeedbackEpic=(e,s)=>e.filter(K([h,E],s)).mergeMap(()=>{const{course:e,components:t}=s.getState(),n=e._courseAssessment,r=O(n,t);if(n._shouldDisableQuestionFeedback){const e=o(r,(e,s)=>(e[s._id]={_canShowFeedback:!1},e),{});return u.of(C(e))}return u.empty()}),s.registerTrackingMapEpic=(e,s)=>e.filter(K(h,s)).do(()=>{S("courseAssessment",H,"extensions")}).ignoreElements(),s.evaluateAssessmentOnComponentCompletedEpic=(e,s)=>e.filter(e=>{if(!K(_,s)(e))return!1;const{courseAssessment:t}=s.getState();if(t._isComplete)return!1;const{componentId:n}=e.payload;return-1!==t.componentIds.indexOf(n)}).map(()=>I(s.getState())),s.courseAssessmentCompleteEpic=(e,s)=>e.filter(e=>e.type===q&&s.getState().courseAssessment._isComplete).map(()=>D(s.getState())),s.setVariableOnScoreChangedEpic=(e,s)=>e.ofType(q,V,A).filter(()=>{const{app:e,course:{_courseAssessment:t}}=s.getState();return e.hasAppStarted&&t&&t._isEnabled&&t._canSaveToVariable&&t._variableId&&t._canSaveToVariableOnScoreChange}).map(()=>s.getState().courseAssessment.score).distinctUntilChanged().map(e=>{const{course:{_courseAssessment:t}}=s.getState();return P(t._variableId,e,t._variableUpdateType)}),s.setVariableOnAssessmentCompletedEpic=(e,s)=>e.ofType(q,V,A).filter(()=>{const{app:e,course:{_courseAssessment:t}}=s.getState();return e.hasAppStarted&&t&&t._isEnabled&&t._canSaveToVariable&&t._variableId&&!t._canSaveToVariableOnScoreChange}).map(()=>s.getState().courseAssessment._isComplete).distinctUntilChanged().filter(e=>e).map(()=>s.getState().courseAssessment.score).distinctUntilChanged().map(e=>{const{course:{_courseAssessment:t}}=s.getState();return P(t._variableId,e,t._variableUpdateType)}),s.showAssessmentCompletedPromptEpic=(e,s)=>e.ofType(V).mergeMap(()=>{const{course:e,courseAssessment:t}=s.getState();if(e._courseAssessment._shouldDisableAssessmentCompletedPopup)return u.empty();let o={title:e._courseAssessment.completionNotifyTitle,body:e._courseAssessment.completionNotifyBody,_class:"course-assessment-notify",_actions:[],_glyph:{_type:"progressCircle",_percentage:t.score}};return e._courseAssessment._shouldDisplayOverviewInPopup&&(o={_component:p.createElement(Q,null),title:e._courseAssessment.completionNotifyTitle,body:e._courseAssessment.completionNotifyBody,_actions:[]}),n(e._courseAssessment,"_showAssessmentLinkInPopup",!0)&&o._actions.push({text:e._courseAssessment.title,_link:{_link:"courseAssessment/showResults",_linkType:"extensions"}}),!(e._courseAssessment._canBeRetaken&&e._courseAssessment._shouldShowRetakeAssessmentInPopup&&(e._courseAssessment._allowUnlimitedRetakeAttempts||t.retakeAttemptsTaken<e._courseAssessment._retakeAttempts))||t._isPassed&&e._courseAssessment._shouldHideRetakeOnAssessmentPassed||o._actions.push({text:e._courseAssessment.retakeAssessmentButtonText,_type:U}),u.of(k(o))}),s.confirmResetAssessmentDialogEpic=(e,s)=>e.filter(K(U,s)).map(()=>{const e=s.getState().course._courseAssessment,t={title:e.retakeAssessmentNotifyTitle,body:e.retakeAssessmentNotifyBody,_action:{text:e.retakeAssessmentNotifyConfirmButtonText,_type:F},_dismiss:{text:e.retakeAssessmentNotifyCancelButtonText}};return k(t)}),s.setupRetakeAssessmentEpic=(e,s,{Api:t})=>e.ofType(F).mergeMap(()=>u.concat(u.of(M()),t.fetchComponents().map(e=>{const{courseAssessment:t,course:o,components:l}=s.getState(),u=n(o._courseAssessment,"_onlyResetIncorrect",!1),p=a(e=>i(e,"_attempts"),e=>c({},e,function(e){const s={_isEnabled:!0,_isCorrect:!1,_isPartlyCorrect:!1,_isComplete:!1,_isSubmitted:!1,_hasUserAnswered:!1,_userAnswer:void 0,_attemptsLeft:void 0,_userFeedback:void 0};return"branching"===e._component&&(s._currentItemId=void 0,s._previousItems=[],s._score=0),s}(e)),e=>N(e,{type:b,component:e,originalComponent:e}),e=>N(e,{type:f,component:e,originalComponent:e})),d=m(e).keyBy("_id").pick(u?r(t.componentIds,e=>!l[e]._isCorrect):t.componentIds).mapValues(p).value();return C(d)}),u.of(B(),v).do(()=>l(()=>{const e=s.getState(),{course:t,components:o}=e,r=t._courseAssessment,a=n(r,"_retakeNavigation","COURSE");if("COURSE"===a)d.replace("/");else if("ASSESSMENT_FIRST_QUESTION"===a||"ASSESSMENT_FIRST_QUESTION_PAGE"===a){const s=O(r,o),t=y(e,s[0],"page");let n="/page/"+t._id;"ASSESSMENT_FIRST_QUESTION"===a&&(n=`/page/${t._id}?element=${s[0]._id}`),d.replace(n)}if("LINK"===a){const e=n(r,"_retakeNavigationLink",{});e&&("course"===e._linkType?d.replace("/"):"extensions"===e._linkType||"additionalContent"===e._linkType?d.replace("/"+e._link):T(e._link))}}))))},2240:function(e,s,t){"use strict";const n=t(2),o=t(0),{connect:r}=t(6),{addPrompt:a}=t(95),{showConfirmResetDialog:i}=t(475),{courseAssessmentSelector:c,courseAssessmentComponentsSelector:m}=t(1423),l=t(2241),u=n({displayName:"CourseAssessmentResultsViewContainer",render(){return o.createElement(l,this.props)}});e.exports=r(e=>({theme:e.theme,course:e.course,courseAssessment:c(e),components:m(e),isReady:e.location.isLocationReady}),{showConfirmResetDialog:i,addPrompt:a})(u)},2241:function(e,s,t){"use strict";var n=t(27)(t(33));const o=t(2),r=t(1),a=t(0),{ContentContainer:i,HeroImage:c}=t(300),m=t(509),l=t(211),u=t(171),p=t(39),d=t(1375),v=t(29),h=t(467),_=t(2242),A=t(1438),E=t(2243),C=t(1439),b=o({displayName:"CourseAssessmentResults",propTypes:{components:r.object.isRequired,courseAssessment:r.object.isRequired,showConfirmResetDialog:r.func.isRequired,theme:r.object.isRequired,course:r.object.isRequired,isReady:r.bool.isRequired,addPrompt:r.func.isRequired},getInitialState:()=>({_selectedComponentId:null}),onViewBreakDown(e){this.setState({_selectedComponentId:e._id})},onViewComponent(e){l(e._refId)},onShowFeedback(e){const{course:s,addPrompt:t}=this.props;t(m(e,e._userFeedback,s))},onCloseCourse(e){e.preventDefault(),window._exitCourse()},onRetakeAssessment(){this.props.showConfirmResetDialog()},getCompletedComponentsCount(){const{completedComponentsCount:e}=this.props.courseAssessment;return e||0},renderNoResults(){const{courseAssessment:e}=this.props;if(!this.getCompletedComponentsCount()&&e.noResultsText)return a.createElement(h,null,a.createElement(v,{className:"ev-component-body",innerClassName:"ev-component-body-inner",body:e.noResultsText}))},renderOverview(){if(this.getCompletedComponentsCount())return a.createElement(A,(0,n.default)({},this.props.courseAssessment,{components:this.props.components}))},renderBreakdown(){const{props:e}=this;if(e.courseAssessment._shouldHideBreakdown)return;return this.getCompletedComponentsCount()?a.createElement(E,{courseAssessment:e.courseAssessment,components:e.components,selectedComponentId:this.state._selectedComponentId,onViewBreakDown:this.onViewBreakDown,onViewComponent:this.onViewComponent,onShowFeedback:this.onShowFeedback}):void 0},renderRetake(){const{courseAssessment:e}=this.props;if(e._isComplete&&e._canBeRetaken)return a.createElement(C,{courseAssessment:e,onRetakeAssessment:this.onRetakeAssessment})},renderCloseCourseButton(){const{courseAssessment:e}=this.props;if(e._isComplete&&e._hasCloseCourseButton)return a.createElement("div",{className:"ev-course-assessment-results-overview-close ev-content ev-extension-content"},a.createElement("div",{className:"ev-course-assessment-results-overview-close-inner ev-content-inner"},a.createElement(d,{className:"ev-course-assessment-results-overview-close-button",icon:"cross",iconPosition:"right",onClick:this.onCloseCourse,text:e._closeCourseButtonText})))},renderHeroImage(){const{_heroImage:e}=this.props.courseAssessment;if(null!=e&&e._isEnabled)return a.createElement(p.Provider,{value:this.props.courseAssessment.title?this.context+1:this.context},a.createElement(c,{title:e.title,body:e.body,graphic:e._graphic,_contentWidth:e._contentWidth,layout:e.layout,floatingGraphic:e._floatingGraphic,parentSelector:".ev-extension-hero-container",theme:this.props.theme,isReady:this.props.isReady}))},render(){var e,s;const{courseAssessment:t,isReady:o,theme:r}=this.props,c=t.title||null!==(e=t._heroImage)&&void 0!==e&&e._isEnabled&&null!==(s=t._heroImage)&&void 0!==s&&s.title?this.context+1:this.context;return a.createElement(i,{region:"course assessment",className:"ev-course-assessment-results ev-extension",ariaLabel:t.ariaLabel},o?null:a.createElement(u,null),a.createElement("div",{className:"ev-extension-hero-container"},this.renderHeroImage()),a.createElement(_,(0,n.default)({},t,{theme:r})),a.createElement(p.Provider,{value:c},this.renderNoResults(),this.renderOverview(),this.renderBreakdown(),this.renderRetake(),this.renderCloseCourseButton()))}});b.contextType=p,e.exports=b},2242:function(e,s,t){"use strict";const n=t(0),o=t(7),r=t(29),a=t(75),i=t(39);e.exports=({title:e,body:s,_headerIcon:t,theme:c})=>{var m,l;const u=null===(m=c._extensions._courseAssessment)||void 0===m||null===(l=m._settings)||void 0===l?void 0:l._headerIcon,p=t||u,d=n.useContext(i);return n.createElement("div",{className:"ev-course-assessment-item-header ev-header"},n.createElement("div",{className:o("ev-course-assessment-item-inner ev-header-inner ev-clearfix",{"ev-no-graphic":!p})},n.createElement("div",{className:"ev-courseAssessment-item-left ev-header-left"},n.createElement(a,{headingElement:"h"+d,displayTitle:e,className:"ev-header-title",innerClassName:"ev-header-title-inner"}),n.createElement(r,{className:"ev-header-body",innerClassName:"ev-header-body-inner",body:s})),p&&n.createElement("div",{className:"ev-course-assessment-item-right ev-header-right"},n.createElement("i",{className:"ev-icon ev-icon-"+p}))))}},2243:function(e,s,t){"use strict";const n=t(89),o=t(2),r=t(1),a=t(0),i=t(467),c=t(75),m=t(39),l=t(2244),u=o({displayName:"CourseAssessmentResultsBreakDown",propTypes:{components:r.object.isRequired,courseAssessment:r.object.isRequired,onViewBreakDown:r.func.isRequired,onShowFeedback:r.func.isRequired,onViewComponent:r.func.isRequired,selectedComponentId:r.string},renderBreakDownItems(){const{props:e}=this;return n(e.components).map((s,t)=>a.createElement(l,{index:t,key:s._id,component:s,isSelected:e.selectedComponentId===s._id,onViewBreakDown:e.onViewBreakDown,onShowFeedback:e.onShowFeedback,onViewComponent:e.onViewComponent,courseAssessment:e.courseAssessment}))},render(){const{courseAssessment:e}=this.props;return a.createElement(i,{className:"ev-course-assessment-results-breakdown"},a.createElement(c,{headingElement:"h"+this.context,displayTitle:e.resultsBreakdownTitle,className:"ev-component-title",innerClassName:"ev-component-title-inner"}),a.createElement("ul",{className:"ev-course-assessment-results-breakdown-items ev-list-items",role:"tablist"},a.createElement(m.Provider,{value:this.context+1},this.renderBreakDownItems())))}});u.contextType=m,e.exports=u},2244:function(e,s,t){"use strict";const n=t(1),o=t(0),r=t(7),a=t(75),i=t(30),c=t(39),m=e=>{const s=o.useContext(c),t=s=>{s.preventDefault(),e.onViewBreakDown(e.component)},n=s=>{s.preventDefault(),e.onViewComponent(e.component)},m=s=>{s.preventDefault(),e.onShowFeedback(e.component)},l=()=>{const s=e.component.displayTitle;return s||e.index+1};return o.createElement("li",{className:"ev-course-assessment-breakdown-item ev-list-item"},o.createElement("div",{className:"ev-course-assessment-breakdown-item-inner ev-list-item-inner"},o.createElement("div",{className:"ev-list-item-left"},o.createElement(a,{headingElement:"h"+s,displayTitle:l(),className:"ev-course-assessment-breakdown-item-title",innerClassName:"ev-course-assessment-breakdown-item-title-inner ev-list-item-title"}),o.createElement("div",{className:"ev-course-assessment-breakdown-item-completed-text"},o.createElement(i,{className:"ev-course-assessment-breakdown-item-completed-text-inner",html:e.component._isComplete?e.courseAssessment.resultsBreakdownQuestionsCompletedText:e.courseAssessment.resultsComponentNotCompleteText}))),o.createElement("div",{className:"ev-list-item-right"},o.createElement(i,{element:"button",className:"ev-button ev-primary ev-course-assessment-breakdown-item-details-button",html:e.courseAssessment.resultsViewDetailedBreakdownText,disabled:!0!==e.component._isComplete,role:"tab",id:e.component._id+"-detail-button","aria-controls":e.component._id+"-breakdown","aria-expanded":e.isSelected,onClick:t}),o.createElement(i,{element:"button",className:"ev-button ev-primary ev-course-assessment-breakdown-item-view-button",role:"link",html:e.courseAssessment.resultsViewComponentText,onClick:n}))),o.createElement("div",{role:"tabpanel",id:e.component._id+"-breakdown","aria-labelledby":e.component._id+"-detail-button","aria-hidden":!e.isSelected,className:r("ev-course-assessment-breakdown-item-advanced ev-list-item-content",{"ev-display-none":!e.isSelected})},o.createElement("div",{className:"ev-course-assessment-breakdown-item-advanced-inner ev-list-item-content-inner"},o.createElement("div",{className:"ev-course-assessment-breakdown-item-details ev-clearfix"},o.createElement("div",{className:"ev-info-detail ev-course-assessment-breakdown-item-details-col"},o.createElement("div",{className:r("ev-info-detail-display ev-icon",{"ev-icon-cross":!e.component._isCorrect,"ev-icon-check":e.component._isCorrect})}),o.createElement(i,{className:"ev-info-detail-label",html:e.component._isCorrect?e.courseAssessment.resultsViewDetailedBreakdownCorrectText:e.courseAssessment.resultsViewDetailedBreakdownIncorrectText})),o.createElement("div",{className:"ev-info-detail ev-course-assessment-breakdown-item-details-col"},o.createElement("div",{className:"ev-info-detail-display"},(()=>{const{_attempts:s,_attemptsLeft:t}=e.component;return 0===t?"N/A":`${s-t}/${s}`})()),o.createElement(i,{className:"ev-info-detail-label",html:e.courseAssessment.resultsBreakdownAttemptsTakenText}))),o.createElement("div",{className:"ev-course-assessment-breakdown-item-advanced-title"},o.createElement(i,{className:"ev-course-assessment-breakdown-item-advanced-title-label",html:e.courseAssessment.resultsBreakdownTitleText+":"}),o.createElement(i,{className:"ev-course-assessment-breakdown-item-advanced-title-inner",html:l()})),o.createElement("div",{className:"ev-course-assessment-breakdown-item-advanced-body"},o.createElement(i,{className:"ev-course-assessment-breakdown-item-advanced-body-label",html:e.courseAssessment.resultsBreakdownBodyTitleText+":"}),o.createElement(i,{className:"ev-course-assessment-breakdown-item-advanced-body-inner",html:e.component.body})),(()=>{const{_canShowFeedback:s,_userFeedback:t}=e.component;if(s&&t)return o.createElement("div",{className:"ev-course-assessment-breakdown-item-advanced-feedback"},o.createElement(i,{element:"button",className:"ev-button ev-primary ev-course-assessment-breakdown-item-advanced-feedback-button",html:e.courseAssessment.resultsBreakdownFeedbackButton,onClick:m}))})())))};m.propTypes={component:n.object.isRequired,courseAssessment:n.object.isRequired,index:n.number.isRequired,isSelected:n.bool.isRequired,onViewBreakDown:n.func.isRequired,onShowFeedback:n.func.isRequired,onViewComponent:n.func.isRequired},e.exports=o.memo(m)},2245:function(e,s,t){"use strict";const n=t(2),o=t(0),{connect:r}=t(6),{courseAssessmentSelector:a,courseAssessmentComponentsSelector:i}=t(1423),c=t(2246),m=n({displayName:"CourseAssessmentResultsDialogContainer",render(){return o.createElement(c,this.props)}});e.exports=r(e=>({courseAssessment:a(e),components:i(e)}))(m)},2246:function(e,s,t){"use strict";var n=t(27)(t(33));const o=t(1),r=t(0),a=t(29),i=t(30),c=t(39),m=t(1438),l=t(1439),u=e=>r.createElement("div",{className:"ev-course-assessment-results-dialog","aria-label":e.courseAssessment.ariaLabel},r.createElement(c.Provider,{value:2},(()=>{const{courseAssessment:s,titleTextAlignment:t}=e;if(s.completionNotifyTitle)return r.createElement(i,{element:"h2",id:"ev-prompt-title",className:"ev-prompt-title ev-focusable",style:{textAlign:t},html:s.completionNotifyTitle,tabIndex:"-1"})})(),(()=>{const{courseAssessment:s,bodyTextAlignment:t}=e;if(s.completionNotifyBody)return r.createElement(a,{id:"ev-prompt-body",className:"ev-prompt-body",style:{textAlign:t},body:s.completionNotifyBody,tabIndex:"-1"})})(),r.createElement(m,(0,n.default)({},e.courseAssessment,{components:e.components})),(()=>{if(e.courseAssessment._canBeRetaken)return r.createElement(l,{courseAssessment:e.courseAssessment,hideRetakeButton:!0})})()));u.propTypes={courseAssessment:o.object.isRequired,components:o.object.isRequired,titleTextAlignment:o.string,bodyTextAlignment:o.string},e.exports=r.memo(u)},2247:function(e,s,t){"use strict";const{connect:n}=t(6),{courseAssessmentStatusSelector:o}=t(1423),r=t(2248);e.exports=n(e=>({status:o(e)}))(r)},2248:function(e,s,t){"use strict";const n=t(8),o=t(0);e.exports=o.memo(({item:e,status:s})=>{if("page"!==e._type||!n(e,"_courseAssessment._isAssessmentPage")||!n(e._courseAssessment,["_assessmentStatusLabel",s,"label"]))return null;const{label:t,icon:r}=e._courseAssessment._assessmentStatusLabel[s];return o.createElement("div",{className:"ev-course-assessment-status-label ev-menu-item-completion"},o.createElement("div",{className:"ev-course-assessment-status-label-inner ev-menu-item-completion-inner"},r&&o.createElement("i",{className:"ev-menu-item-completion-icon ev-icon ev-icon-"+r}),o.createElement("span",null,t)))})},2249:function(e,s,t){"use strict";e.exports={_isComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0},_isPassed:{fieldKey:"_isPassed",type:"Boolean",shouldRestore:!0,shouldStoreOnTopLevel:!0},_assessmentAttemptsTaken:{fieldKey:"retakeAttemptsTaken",type:"Number",shouldRestore:!0,shouldStoreOnTopLevel:!0},_totalAssessmentAttemptsTaken:{fieldKey:"totalAttemptsTaken",type:"Number",shouldRestore:!0,shouldStoreOnTopLevel:!0},_score:{fieldKey:"score",type:"Number",shouldRestore:!0},_progress:{fieldKey:"_progress",type:"Number",shouldRestore:!0},_isAssessmentComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!1,shouldStoreOnTopLevel:!0},_assessmentCompletedQuestionsCount:{fieldKey:"completedComponentsCount",type:"Number",shouldRestore:!1,shouldStoreOnTopLevel:!0},_assessmentCorrectQuestionsCount:{fieldKey:"correctComponentsCount",type:"Number",shouldRestore:!1,shouldStoreOnTopLevel:!0}}}}]);