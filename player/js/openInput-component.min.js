(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{1283:function(e,s,t){"use strict";const{registerComponent:n}=t(4),o=t(2030),i=t(2031),{saveUserAnswer:r}=t(1558);n("openInput",{component:o,actions:{saveUserAnswer:r},reducer:i,mapStateToProps:t(2032),trackingMap:t(2033)})},1372:function(e,s,t){"use strict";const n=t(7);e.exports=function(e){return n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1373:function(e,s,t){"use strict";e.exports=(e,s="_hasBeenViewed")=>{const{component:t,isPageReady:n}=e;return!0===n&&!0===t._isReady&&!0!==t[s]}},1374:function(e,s,t){"use strict";e.exports=function(e,s,t,n,o){n&&n.props&&n.props.component?(s.top&&(n.isInviewTop=!0),s.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&o&&o(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}},1430:function(e,s,t){"use strict";const n=t(2),o=t(1),i=t(0),r=t(7),a=n({displayName:"TextArea",propTypes:{value:o.string.isRequired,onChange:o.func.isRequired,onFocus:o.func,onBlur:o.func,className:o.string,placeholder:o.string,minHeight:o.number,ariaLabel:o.string,isDisabled:o.bool,shouldFocus:o.bool},getDefaultProps:function(){return{value:""}},getClassName:function(){return r("ev-text-area",this.props.className)},onChange:function(e){this.props.onChange(e.target.value)},componentDidUpdate:function(e){const{shouldFocus:s}=this.props;s&&!e.shouldFocus&&this._textArea.focus()},render:function(){return i.createElement("textarea",{ref:e=>this._textArea=e,"aria-label":this.props.ariaLabel,value:this.props.value,onChange:this.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,placeholder:this.props.placeholder,className:this.getClassName(),style:{minHeight:this.props.minHeight},disabled:this.props.isDisabled})}});e.exports=a},1558:function(e,s,t){"use strict";s.OPENINPUT_SAVE_USER_ANSWER="OPENINPUT_SAVE_USER_ANSWER",s.saveUserAnswer=e=>({type:s.OPENINPUT_SAVE_USER_ANSWER,payload:e})},2030:function(e,s,t){"use strict";const n=t(214),o=t(513),i=t(2),r=t(1),a=t(0),c=t(7),{Component:p,ComponentAssignment:u}=t(466),l=t(1430),d=t(1373),m=t(1374),h=t(1372),v=i({displayName:"OpenInput",propTypes:{component:r.object.isRequired,setComponentAsReady:r.func.isRequired,setComponentAsViewed:r.func.isRequired,setComponentAsComplete:r.func.isRequired,showFeedback:r.func.isRequired,saveUserAnswer:r.func.isRequired,setAriaLive:r.func.isRequired,articleStyle:r.string,theme:r.object.isRequired,styles:r.any},getInitialState(){return{_userAnswer:this.props.component._userAnswer||"",_showSavedModal:!1}},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},UNSAFE_componentWillReceiveProps({component:e}){o(e._userAnswer)||e._userAnswer===this.state._userAnswer||this.setState({_userAnswer:e._userAnswer})},componentDidUpdate(e){const{component:s}=this.props;!e.component._isSubmitted&&s._isSubmitted&&(this.showSavedModal(),s._userAnswer&&this.showFeedback())},saveUserAnswer(e){const{props:s}=this;s.saveUserAnswer({componentId:s.component._id,userAnswer:e}),s.component._isSubmitted&&(this.showSavedModal(),e&&this.showFeedback())},showFeedback(){const{component:e}=this.props;if(!e._canShowFeedback)return;const s={feedbackTitle:e._shouldShowDisplayTitleInFeedback?e.displayTitle:null,feedbackMessage:e.feedbackMessage,feedbackGraphic:e.feedbackGraphic};setTimeout(()=>{this.props.showFeedback(s)},200)},showSavedModal(){this.setState({_showSavedModal:!0}),n(()=>{this.setState({_showSavedModal:!1})},1e3)},onTextAreaChange(e){this.setState({_userAnswer:e})},onSaveClicked(e){e.preventDefault();const{component:s,setAriaLive:t,setComponentAsComplete:n}=this.props;this.saveUserAnswer(this.state._userAnswer),t({message:s.savedAriaLiveMessage,isAssertive:!0}),n(s._id,{_isSubmitted:!0})},onClearClicked(e){e.preventDefault(),this.saveUserAnswer("");const{component:s,setAriaLive:t}=this.props;t({message:s.clearedAriaLiveMessage,isAssertive:!0})},onVisibilityChange(...e){m(...e,this,this.props.setComponentAsViewed)},getTextAreaMinHeight(){return this.props.component._hasMinimumHeight?this.props.component._minimumHeight:300},getButtonSettings(){const{articleStyle:e,theme:s}=this.props;let t=s._button._settings;if(e&&"none"!==e){t=s._articleStyles[e]._elements._button._settings}return t},renderTextArea(){var e;const{component:s}=this.props;return(null===(e=s._assignment)||void 0===e?void 0:e._isMarked)?a.createElement("div",{className:"ev-openInput-userAnswer"},a.createElement("div",{className:"ev-openInput-userAnswer-inner"},s._userAnswer)):a.createElement(l,{ariaLabel:s.textAreaAriaLabel,value:this.state._userAnswer,onChange:this.onTextAreaChange,placeholder:s.placeholder,minHeight:this.getTextAreaMinHeight()})},renderButtons(){var e;const{component:s}=this.props;if(null!==(e=s._assignment)&&void 0!==e&&e._isMarked)return;const{isActionButtonOnRight:t}=this.getButtonSettings(),{_userAnswer:n}=this.state,o=""===n&&!s._userAnswer||s._userAnswer&&s._userAnswer===n;return a.createElement("div",{className:c("ev-buttons",{"ev-switch-buttons":t})},a.createElement("button",{className:c("ev-button ev-button-save",{"ev-disabled":o}),onClick:this.onSaveClicked,"aria-disabled":o},s._saveButton),a.createElement("button",{className:c("ev-button ev-button-clear",{"ev-disabled":""===n}),onClick:this.onClearClicked,"aria-disabled":""===n},s._clearButton))},renderSaveModal(){return a.createElement("div",{className:c("ev-openInput-save-modal",{"ev-is-visible":this.state._showSavedModal}),"aria-hidden":!this.state._showSavedModal},a.createElement("div",{className:"ev-openInput-save-modal-inner"},a.createElement("span",{className:"ev-save-success-message"},this.props.component._saveSuccessMessage)))},renderComponentAssignment(){var e;const{component:s}=this.props;if(null!==(e=s._assignment)&&void 0!==e&&e._isEnabled)return a.createElement(u,{component:s,assignment:s._assignment})},render(){const{props:e}=this;return a.createElement(p,{component:e.component,styles:e.styles,isVisibilitySensorActive:d(e),onVisibilityChange:this.onVisibilityChange},a.createElement("div",null,a.createElement("div",{className:h(e.component)},this.renderTextArea(),this.renderSaveModal()),this.renderButtons(),this.renderComponentAssignment()))}});e.exports=v},2031:function(e,s,t){"use strict";const n=t(218),{OPENINPUT_SAVE_USER_ANSWER:o}=t(1558);e.exports=function(e,s){switch(s.type){case o:return{...e,_userAnswer:s.payload.userAnswer,_isCorrect:!0,_isSubmitted:!0,_correctAt:n()};default:return e}}},2032:function(e,s,t){"use strict";const n=t(76);e.exports=(e,s)=>({articleStyle:n(e,s,"article")._classes})},2033:function(e,s,t){"use strict";e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_userAnswer:{fieldKey:"_userAnswer",type:"String",shouldRestore:!0},_assignment:{fieldKey:"_assignment",type:"Object",shouldRestore:!0},_assignmentAttempts:{fieldKey:"_assignmentAttempts",type:"Object",shouldRestore:!0}}}}]);