(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1274:function(e,t,n){"use strict";const{registerComponent:s}=n(4),i=n(1990),o=n(1993),{saveUserAnswer:r}=n(1551);s("linkedOpenInput",{component:i,actions:{saveUserAnswer:r},reducer:o,mapStateToProps:n(1994),trackingMap:n(1995)})},1372:function(e,t,n){"use strict";const s=n(7);e.exports=function(e){return s(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1373:function(e,t,n){"use strict";e.exports=(e,t="_hasBeenViewed")=>{const{component:n,isPageReady:s}=e;return!0===s&&!0===n._isReady&&!0!==n[t]}},1374:function(e,t,n){"use strict";e.exports=function(e,t,n,s,i){s&&s.props&&s.props.component?(t.top&&(s.isInviewTop=!0),t.bottom&&(s.isInviewBottom=!0),s.isInviewTop&&s.isInviewBottom&&i&&i(s.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}},1430:function(e,t,n){"use strict";const s=n(2),i=n(1),o=n(0),r=n(7),a=s({displayName:"TextArea",propTypes:{value:i.string.isRequired,onChange:i.func.isRequired,onFocus:i.func,onBlur:i.func,className:i.string,placeholder:i.string,minHeight:i.number,ariaLabel:i.string,isDisabled:i.bool,shouldFocus:i.bool},getDefaultProps:function(){return{value:""}},getClassName:function(){return r("ev-text-area",this.props.className)},onChange:function(e){this.props.onChange(e.target.value)},componentDidUpdate:function(e){const{shouldFocus:t}=this.props;t&&!e.shouldFocus&&this._textArea.focus()},render:function(){return o.createElement("textarea",{ref:e=>this._textArea=e,"aria-label":this.props.ariaLabel,value:this.props.value,onChange:this.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,placeholder:this.props.placeholder,className:this.getClassName(),style:{minHeight:this.props.minHeight},disabled:this.props.isDisabled})}});e.exports=a},1551:function(e,t,n){"use strict";t.LINKEDOPENINPUT_SAVE_USER_ANSWER="LINKEDOPENINPUT_SAVE_USER_ANSWER",t.saveUserAnswer=e=>({type:t.LINKEDOPENINPUT_SAVE_USER_ANSWER,payload:e})},1990:function(e,t,n){"use strict";var s=n(27)(n(33));const i=n(214),o=n(28),r=n(2),a=n(1),p=n(0),l=n(7),{Component:c}=n(466),d=n(1430),u=n(1372),m=n(1373),h=n(1374),v=n(139),_=n(1991),k=n(1992),w=r({displayName:"LinkedOpenInput",propTypes:{component:a.object.isRequired,setComponentAsReady:a.func.isRequired,setComponentAsViewed:a.func.isRequired,setComponentAsComplete:a.func.isRequired,showFeedback:a.func.isRequired,saveUserAnswer:a.func.isRequired,setAriaLive:a.func.isRequired,isLinkedOpenInputsComplete:a.bool,articleStyle:a.string,theme:a.object.isRequired,styles:a.object},getInitialState(){return{_userAnswer:this.props.component._userAnswer||"",_showSavedModal:!1}},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},componentDidUpdate(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&(t._userAnswer&&this.showFeedback(),this.showSavedModal())},saveUserAnswer(e){const{props:t}=this;t.saveUserAnswer({componentId:t.component._id,userAnswer:e}),t.component._isSubmitted&&(e&&this.showFeedback(),this.showSavedModal())},showFeedback(){const{component:e}=this.props;if(!e._canShowFeedback)return;const t={feedbackTitle:e._shouldShowDisplayTitleInFeedback?e.displayTitle:null,feedbackMessage:e.feedbackMessage,feedbackGraphic:e.feedbackGraphic};this.props.showFeedback(t)},showSavedModal(){this.setState({_showSavedModal:!0}),i(()=>{this.setState({_showSavedModal:!1})},1e3)},onTextAreaChange(e){this.setState({_userAnswer:e})},onSaveClicked(e){e.preventDefault();const{component:t,setAriaLive:n,setComponentAsComplete:s}=this.props;this.saveUserAnswer(this.state._userAnswer),n({message:t.savedAriaLiveMessage,isAssertive:!0}),s(t._id,{_isSubmitted:!0})},onClearClicked(e){e.preventDefault(),this.setState({_userAnswer:""},()=>this.saveUserAnswer(""));const{component:t,setAriaLive:n}=this.props;n({message:t.clearedAriaLiveMessage,isAssertive:!0})},onVisibilityChange(...e){h(...e,this,this.props.setComponentAsViewed)},getTextAreaMinHeight(){return this.props.component._hasMinimumHeight?this.props.component._minimumHeight:300},getLinkedUserAnswerStyle(){const{component:e,theme:t}=this.props,n={},s=e._linkedOpenInputAnswerBackgroundColor,i=e._linkedOpenInputAnswerTextColor;return s&&"transparent"!==s&&(n.backgroundColor=v(s,t._swatches)),i&&"transparent"!==i&&(n.color=v(i,t._swatches)),n},getButtonSettings(){const{articleStyle:e,theme:t}=this.props;let n=t._button._settings;if(e&&"none"!==e){n=t._articleStyles[e]._elements._button._settings}return n},renderIncomplete(){if(!this.props.isLinkedOpenInputsComplete)return p.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete"},o(this.props.component._items,e=>p.createElement(k,(0,s.default)({key:e._id},e))))},renderOpenInputAnswers(){const{component:e}=this.props,t=this.getLinkedUserAnswerStyle();return o(e._items,e=>p.createElement(_,(0,s.default)({key:e._id,style:t},e)))},renderTextArea(){if(this.props.isLinkedOpenInputsComplete)return p.createElement(d,{ariaLabel:this.props.component.textAreaAriaLabel,value:this.state._userAnswer,onChange:this.onTextAreaChange,placeholder:this.props.component.placeholder,minHeight:this.getTextAreaMinHeight()})},renderButtons(){if(!this.props.isLinkedOpenInputsComplete)return;const{component:e}=this.props,{_userAnswer:t}=this.state,{_isActionButtonOnRight:n}=this.getButtonSettings(),s=""===t&&!e._userAnswer||e._userAnswer&&e._userAnswer===t;return p.createElement("div",{className:l("ev-buttons",{"ev-switch-buttons":n})},p.createElement("button",{className:l("ev-button ev-button-save",{"ev-disabled":s}),onClick:this.onSaveClicked,"aria-disabled":s},e._saveButton),p.createElement("button",{className:l("ev-button ev-button-clear",{"ev-disabled":""===t}),onClick:this.onClearClicked,"aria-disabled":""===t},e._clearButton))},renderSaveModal(){return p.createElement("div",{className:l("ev-linkedOpenInput-save-modal",{"ev-is-visible":this.state._showSavedModal}),role:"alert"},p.createElement("div",{className:"ev-linkedOpenInput-save-modal-inner"},p.createElement("span",{className:"ev-save-success-message"},this.props.component._saveSuccessMessage)))},render(){const{props:e}=this;return p.createElement(c,{component:e.component,styles:e.styles,isVisibilitySensorActive:m(e),onVisibilityChange:this.onVisibilityChange},p.createElement("div",null,p.createElement("div",{className:u(e.component)},this.renderIncomplete(),this.renderOpenInputAnswers(),this.renderTextArea(),this.renderSaveModal()),this.renderButtons()))}});e.exports=w},1991:function(e,t,n){"use strict";const s=n(0),i=n(2),{connect:o}=n(6),r=n(1),a=n(212),p=i({displayName:"LinkedOpenInputAnswer",propTypes:{isLinkedOpenInputComplete:r.bool.isRequired,linkedOpenInputUserAnswer:r.string,_linkedAnswerLabelText:r.string,style:r.object},render(){const{isLinkedOpenInputComplete:e,linkedOpenInputUserAnswer:t,_linkedAnswerLabelText:n,style:i}=this.props;return e?s.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer-container"},s.createElement("div",{className:"ev-label"},n),s.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer",style:i},s.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer-inner"},t))):null}});e.exports=o((e,t)=>{const n=t._linkedOpenInputId?a(t._linkedOpenInputId):{};return{isLinkedOpenInputComplete:n._isComplete||!1,linkedOpenInputUserAnswer:n._userAnswer}})(p)},1992:function(e,t,n){"use strict";const s=n(0),i=n(2),{connect:o}=n(6),r=n(1),a=n(211),p=n(212),l=i({displayName:"LinkedOpenInputIncomplete",propTypes:{isLinkedOpenInputComplete:r.bool.isRequired,_linkedOpenInputId:r.string,_navigateToLinkedButtonText:r.string,_linkedIncompleteMessage:r.string},onNavigateClicked(e){e.preventDefault(),a(this.props._linkedOpenInputId)},render(){const{isLinkedOpenInputComplete:e,_linkedIncompleteMessage:t,_navigateToLinkedButtonText:n}=this.props;return e?null:s.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete-message"},s.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete-message-inner ev-label"},t),s.createElement("button",{className:"ev-linkedOpenInput-navigate-linked ev-button ev-primary",onClick:this.onNavigateClicked},n))}});e.exports=o((e,t)=>({isLinkedOpenInputComplete:(t._linkedOpenInputId?p(t._linkedOpenInputId):{})._isComplete||!1}))(l)},1993:function(e,t,n){"use strict";const s=n(218),{LINKEDOPENINPUT_SAVE_USER_ANSWER:i}=n(1551);e.exports=function(e,t){switch(t.type){case i:return{...e,_userAnswer:t.payload.userAnswer,_isSubmitted:!0,_isCorrect:!0,_correctAt:s()};default:return e}}},1994:function(e,t,n){"use strict";const s=n(40),i=n(18),o=n(144),r=n(76);e.exports=(e,t)=>{let n=t._isAlwaysEnabled;if(!n){const r=s(t._items).map(e=>e._linkedOpenInputId).compact().value(),a=o(r,e);n=void 0===i(a,e=>!0!==e._isComplete)}return{isLinkedOpenInputsComplete:n,articleStyle:r(e,t,"article")._classes}}},1995:function(e,t,n){"use strict";e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_userAnswer:{fieldKey:"_userAnswer",type:"String",shouldRestore:!0}}}}]);