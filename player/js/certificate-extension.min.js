(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1318:function(e,t,n){"use strict";const{registerEpics:i,registerReducer:r}=n(4),{registerElementsEpic:c,checkOnCourseAttainmentMethod:o,checkOnCourseAssessmentMethod:s,checkOnAppReadyOrComponentsUpdatedEpic:a}=n(2221);r("certificate",n(2225)),i(c,o,s,a)},1390:function(e,t,n){"use strict";var i=n(27)(n(1447));e.exports=function(e,t=new Date){return"string"==typeof t&&(t=new Date(t)),(0,i.default)(t,function(e){return e.includes("DD")&&(e=e.replace("DD","dd")),e.includes("YYYY")&&(e=e.replace("YYYY","yyyy")),e}(e))}},1394:function(e,t,n){"use strict";const i=n(8);e.exports=(e,t,n)=>(Array.isArray(e)||(e=[e]),({type:r})=>-1!==e.indexOf(r)&&i(n.getState(),["course",t,"_isEnabled"],!1))},1395:function(e,t,n){"use strict";var i=n(27)(n(169));const r=n(170),c=n(141),o=n(85),s=n(1412);e.exports=function(){var e=(0,i.default)((function*(e,t=["_graphic","_primaryLogo","_secondaryLogo"],n=o){const i=r(t,(t,i)=>(e[i]&&(t[i]=n(e[i])),t),{});if(!c(i))return i;for(const[e,t]of Object.entries(i)){const n=yield s(t);i[e]=n}return i}));return function(t){return e.apply(this,arguments)}}()},1412:function(e,t,n){"use strict";var i=n(27)(n(169));e.exports=function(){var e=(0,i.default)((function*(e){const t=new Image;t.src=e,yield t.decode();const n=document.createElement("canvas"),i=n.getContext("2d"),r=t.width<500?t.width:500,c=t.width<500?t.height:r*t.height/t.width;return n.width=r,n.height=c,i.drawImage(t,0,0,r,c),n.toDataURL("image/png")}));return function(t){return e.apply(this,arguments)}}()},1455:function(e,t,n){"use strict";var i=n(27)(n(169));const r=n(8),c=n(1395),o=n(1390);function s(e){return"landscape"===e._orientation}e.exports=function(){var e=(0,i.default)((function*(e,t){const n=yield c(e),i={pageOrientation:"portrait",content:[]},a=function(e,t){if(!t._primaryLogo&&!t._secondaryLogo)return null;const n={columns:[]},i=s(e)?[80,80]:[100,100];if(t._primaryLogo){const e={width:"50%",alignment:"left",stack:[{image:t._primaryLogo,fit:i}]};n.columns.push(e)}if(t._secondaryLogo){const e={width:"50%",alignment:"right",stack:[{image:t._secondaryLogo,fit:i}]};n.columns.push(e)}return n}(e,n);null!==a&&i.content.push(a);const l=function(e){if(!e.certificateTitle)return null;let t=[0,20,0,20],n=32;s(e)&&(t=[0,10,0,15],n=26);return{text:e.certificateTitle,alignment:"center",fontSize:n,margin:t}}(e);null!==l&&i.content.push(l);const u=function(e){if(!e.certificateMessage)return null;let t=[0,0,0,20],n=16;s(e)&&(t=[0,0,0,15],n=12);return{text:e.certificateMessage,alignment:"center",fontSize:n,margin:t}}(e);null!==u&&i.content.push(u);const d=function(e){if(!e.certificateGoal)return null;let t=[0,0,0,20],n=16;s(e)&&(t=[0,0,0,15],n=12);return{text:e.certificateGoal,alignment:"center",fontSize:n,margin:t}}(e);null!==d&&i.content.push(d);const f=function(e,t){if(!t._graphic)return null;let n=[0,0,0,20],i=[350,350];s(e)&&(n=[0,0,0,15],i=[250,250]);return{image:t._graphic,alignment:"center",fit:i,margin:n}}(e,n);null!==f&&i.content.push(f);const p=function(e,t){let n=[0,0,0,20],i=32;s(e)&&(n=[0,0,0,15],i=24);return{text:`${e.nameLabel} ${t}`,alignment:"center",italics:!0,fontSize:i,margin:n}}(e,t);i.content.push(p);const m=function(e){const t=r(e,"_dateFormat","DD/MM/YYYY"),n=o(t);let i=[0,0,0,20],c=16;s(e)&&(i=[0,0,0,10],c=12);return{text:`${e.dateLabel} ${n}`,alignment:"center",fontSize:c,margin:i}}(e);return i.content.push(m),window.pdfMake.createPdf(i)}));return function(t,n){return e.apply(this,arguments)}}()},1497:function(e,t,n){"use strict";e.exports={COURSE_ASSESSMENT:"Course Assessment",COURSE_ASSESSMENT_PASSED:"Course Assessment Passed",COURSE_ATTAINMENT:"Course Attainment"}},1596:function(e,t,n){"use strict";t.CERTIFICATE_COMPLETED="CERTIFICATE_COMPLETED",t.certificateCompleted=e=>({type:t.CERTIFICATE_COMPLETED,payload:e})},1597:function(e,t,n){"use strict";const{COURSE_ASSESSMENT:i,COURSE_ASSESSMENT_PASSED:r}=n(1497);e.exports=({course:e,courseAssessment:t})=>{var n,c;if(null==e||null===(n=e._certificate)||void 0===n||!n._isEnabled||null==e||null===(c=e._courseAssessment)||void 0===c||!c._isEnabled)return!1;const{_obtainmentMethod:o}=e._certificate;return!(![i,r].includes(o)||!t._isComplete)&&!(o===r&&!t._isPassed)}},1598:function(e,t,n){"use strict";const{COURSE_ATTAINMENT:i}=n(1497);e.exports=({course:e,courseAttainment:t})=>{var n,r;return!!(null!=e&&null!==(n=e._certificate)&&void 0!==n&&n._isEnabled&&null!=e&&null!==(r=e._courseAttainment)&&void 0!==r&&r._isEnabled&&e._certificate._obtainmentMethod===i&&t._isComplete)}},2221:function(e,t,n){"use strict";const i=n(0),{Redirect:r}=n(34),{Observable:c}=n(5),{asap:o}=n(223),s=n(1394),{APP_READY:a,APP_STARTED:l}=n(9),{addElement:u}=n(42),{loadPdfMake:d}=n(498),{COMPONENTS_UPDATED:f}=n(60),{addPrompt:p}=n(95),{COURSE_ATTAINMENT_COMPLETE:m}=n(486),{COURSE_ASSESSMENT_COMPLETE:E}=n(475),_=n(2222),{certificateCompleted:h}=n(1596),g=n(1597),C=n(1598),S=n(2224);function T({course:e}){const t=[h(!0)];if(!e._certificate._hideDialog){const n={title:e._certificate.title,body:e._certificate.achievedText,_action:{text:e._downloads.viewDownloadsButtonText,_link:{_linkType:"extensions",_link:"downloads"}},_glyph:{_type:"icon",_className:"ev-icon-license"}};t.push(p(n))}return c.of(...t,o)}t.registerElementsEpic=(e,t)=>e.filter(s(a,"_certificate",t)).mergeMap(()=>c.of(d(),u({props:{},component:_,parent:"downloads",name:"certificate"}),u({parent:"router",name:"certificateRedirect",path:"/certificate",exact:!0,render:()=>i.createElement(r,{to:"/downloads"})}))),t.checkOnAppReadyOrComponentsUpdatedEpic=(e,t)=>e.filter(s([l,f],"_certificate",t)).mergeMap(()=>{const e=t.getState(),n=S(e);return e.certificate.isComplete!==n?c.of(h(n)):c.empty()}),t.checkOnCourseAttainmentMethod=(e,t)=>e.filter(s(m,"_certificate",t)).filter(()=>{const e=t.getState();return!e.certificate.isComplete&&C(e)}).mergeMap(()=>T(t.getState())),t.checkOnCourseAssessmentMethod=(e,t)=>e.filter(s(E,"_certificate",t)).filter(()=>{const e=t.getState();return!e.certificate.isComplete&&g(e)}).mergeMap(()=>T(t.getState()))},2222:function(e,t,n){"use strict";const i=n(0),{connect:r}=n(6),c=n(2223);e.exports=r(({certificate:e,course:t,device:n})=>({device:n,isComplete:e.isComplete,certificate:t._certificate}))(e=>i.createElement(c,e))},2223:function(e,t,n){"use strict";var i=n(27)(n(169));const r=n(2),c=n(1),o=n(0),s=n(8),a=n(1455),l=r({displayName:"CertificateDownload",propTypes:{certificate:c.object.isRequired,username:c.string,isComplete:c.bool.isRequired,downloads:c.object.isRequired,device:c.object},onDownloadCertificateClicked(e){var t=this;return(0,i.default)((function*(){e.preventDefault(),e.currentTarget.blur();const{certificate:n,username:i}=t.props,r=yield a(n,i);if(t.props.device.touch&&!t.props.device.isWindowsTouchScreen)return r.open();const c=s(n,"fileName","Certificate");r.download(c+".pdf")}))()},renderDownloadButton(){const{props:e}=this,t=!(e.username&&e.isComplete);return o.createElement("button",{className:"ev-button ev-certificate-download",onClick:this.onDownloadCertificateClicked,disabled:t},e.certificate.downloadButtonText)},renderCertificateItemText(){const{isComplete:e,certificate:t}=this.props,n=e?t.achievedText:t.notAchievedText;return o.createElement("div",null,n)},renderNameRequired(){const{props:e}=this;if(e.isComplete&&!e.username)return o.createElement("span",{className:"ev-certificate-action-warning ev-label"},o.createElement("strong",null,e.downloads.nameRequiredText))},render(){return o.createElement("div",{className:"ev-list-item ev-certificate-download"},o.createElement("div",{className:"ev-list-item-inner ev-clearfix"},o.createElement("div",{className:"ev-list-item-left"},o.createElement("div",{className:"ev-list-item-title"},this.props.certificate.title),o.createElement("div",{className:"ev-list-item-content"},this.renderCertificateItemText())),o.createElement("div",{className:"ev-list-item-right"},this.renderNameRequired(),this.renderDownloadButton())))}});e.exports=l},2224:function(e,t,n){"use strict";const i=n(1598),r=n(1597),{COURSE_ATTAINMENT:c,COURSE_ASSESSMENT:o,COURSE_ASSESSMENT_PASSED:s}=n(1497);e.exports=e=>{const t=e.course._certificate._obtainmentMethod;return t===c?i(e):(t===o||t===s)&&r(e)}},2225:function(e,t,n){"use strict";const{SETUP_APP:i}=n(9),{CERTIFICATE_COMPLETED:r}=n(1596),c={isComplete:!1};e.exports=(e=c,t)=>{var n;if(t.type===i)return null!==(n=t.payload.course._certificate)&&void 0!==n&&n._isEnabled?e:c;switch(t.type){case r:return{...e,isComplete:t.payload};default:return e}}}}]);